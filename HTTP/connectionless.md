# 비 연결성(connectionless)
`TCP/IP의 경우에는 기본적으로 연결을 유지한다`

## 연결을 유지하는 모델
![image](/HTTP/images/connection.png)
- 클라이언트1, 2이 놀고 있어도 서버는 계속 연결을 유지 해야하는 단점이 있다

<br>

## 연결을 유지하지 않는 모델
![image](/HTTP/images/connectionless.png)
- 클라이언트1이 서버와 요청, 응답이 끝났으면 연결을 종료한다.
- 클라이언트2, 3도 마찬가지로 요청, 응답이 끝났으면 연결을 종료한다.
- 현재 요청을 주고 받을 때만 연결을 하기 때문에 서버의 자원을 줄일 수 있다.

<br>

## 비 연결성
- HTTP는 기본이 연결을 유지하지 않는 모델
- 일반적으로 초 단위 이하의 빠른속도로 응답
- 1시간 동안 수천명이 서비스를 사용해도 실제 서버에서 동시에 처리하는 요청은 수십개 이하로 매우 작다
  - 예) 웹 브라우저에서 계속 연속해서 검색 버튼을 누르지 않는 것처럼.
- 서버 자원을 매우 효율적으로 사용할 수 있다

<br>

`하지만 비 연결성도 장점만 있는건 아니고 단점이 있다`
## 비 연결성 한계와 극복
- TCP/IP 연결을 새로 맺어야 함 - 3 way handshake 시간 추가
- 웹 브라우저로 사이트를 요청하면 HTML 뿐만 아니라 CSS, JS, 추가 이미지 등등 수 많은 자원이 함께 다운로드 됨
- 지금은 HTTP 지속 연결(Persistent Connections)로 문제 해결
- HTTP/2, HTTP/3 에서는 더 많은 최적화가 됐다.

<br>

## HTTP 지속 연결(Persistent Connections)
- html파일 외에 css ,js등 각종 리소스들을 보내야되기때문에 일정시간동안 약 30초동안은 tcp/ip연결을 끊지않고 대기한다.
- 추가로 마지막 데이터를 전송하고 나서 보통 10초 정도 연결을 유지한다.
  - 번외로 HTTP 초기에는 연결하고 HTML요청/응답하고 종료하고  CSS 따로, JS 따로 이런식이라 매우 비효율적이였음
![image](/HTTP/images/persistent.png)


`개발할땐 최대한 Stateless를 기억하고 개발해야 한다 `