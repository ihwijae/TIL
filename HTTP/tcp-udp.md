## 인터넷 프로토콜 스택의 4계층
* 애플리케이션 계층 : HTTP, FTP
* 전송 계층 : TCP, UDP
* 인터넷 계층 : IP
* 네트워크 인터페이스 계층 : LAN 드라이버, LAN 장비...


## 프로토콜 계층 :
1. 웹 브라우저(프로그램)이 Hello, world 메세지 생성
2. Socket 라이브러리를 통해 전달
3. TCP 정보 생성 (메세지 데이터 포함)
4. IP 패킷 생성 (TCP 데이터 포함)
5. 마지막으로 네트워크 인터페이스를 통해 데이터 전송 (Ethernet Frame 포함)


`패킷이란 : 패키지 + 버킷(덩어리)를 합친 단어. 쉽게 설명하자면, 택배 박스에 데이터를 넣는다로 이해하자
그렇게 담은 패킷으로 데이터 전송을 한다.`


![image](/images/http/패킷정보.png)
패킷의 구조


## TCP 특징
* 연결지향 - TCP 3 way handshake (가상연결)
* 데이터 전달 보증
* 순서 보장
* 신뢰 가능한 프로토콜
* 현재 대다수 서비스가 TCP 프로토콜을 사용함.

## TCP 3 way handshake
* 기존 IP 프로토콜에서 단점으로 언급한 비 연결성의 문제점을 해결한다
* ![image](/images/http/3wayhandshake.png)
* 클라이언트에서 데이터를 전송하기 전에 먼저 서버와 연결이 가능한지 체크하는 과정이다.
  * SYN : 접속 요청
  * ACK : 요청 수락
* 클라이언트 <-> 서버 간의 응답을한다. 


## 데이터 전달 보증
* 클라이언트 에서 서버로 데이터를 전송하면, 서버에서 데이터를 잘 받았다고 응답해준다.
* 이 과정을 통해서 데이터 전달 보증이 가능하다.
* 서버에서 응답이 없다면 데이터 전송의 문제가 생긴것이라고 인지 할 수있다.

## 순서 보장
* 클라이언트에서 서버로 데이터를 전송할 때 패킷의 용량이 크면 나누어서 전송한다 (일반적으로 1500byte)
* 만일 클라이언트에서 서버로 패킷1, 패킷2, 패킷3 의 순서롤 전송한다고 해보자
  * ![image](/images/http/패킷순서보장.png)
  * 이러한 과정을 거쳐서 패킷의 순서를 보장할 수 있다
  * 물론 서버에서 커스텀해서 최적화도 가능하다.


## UDP
* 하얀 도화지에 비유 (기능이 거의 없다)
* 연결지향 - TCP 3 way handshake 기능이 없다.
* 데이터 전달 보증 X
* 순서 보장 X
* 데이터 전달 순서가 보장되지 않지만 단순하고 속도가 빠르다. (TCP 3 way handshake 하지 않기 때문)
* IP와 거의 같지만 PORT, 체크섬 정도만 추가
* 애플리케이션에서 추가 작업 필요
  * 번외로, HTTP3 버전에서는 UDP 프로토콜을 사용함 (최적화를 했음)




